{% extends 'base.html' %}
{% load static %}

{% block title %}Registro{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/style.css' %}">
{% endblock %}

{% block content %}
<div class="col-xs-12 col-sm-12 col-md-10 col-lg-10 offset-xs-0 offset-sm-0 offset-md-1 offset-lg-1">
    <h3 class="text-center">Usuários</h3>
    <br>
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 offset-xs-0 offset-sm-0 offset-md-3 offset-lg-3">
        <form action="{% url 'employees' %}" type="get">
            <div class="input-group mb-3">
              <input name="name" type="text" value="{{ request.GET.name }}" class="form-control" placeholder="Buscar" aria-label="Buscar">
              <div class="input-group-append">
                <button type="submit" class="btn btn-primary">Buscar</button>
              </div>
            </div>
        </form>
    </div>
    <hr>
    <br>
    <div class="table-employee">
        <table class="table table-striped">
          <thead>
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Nome</th>
              <th scope="col">Registro</th>
              <th scope="col">Setor</th>
              <th scope="col">Cargo</th>
              <th scope="col">Ações</th>
            </tr>
          </thead>
          <tbody>
              {% for employee in employees %}
                <tr>
                  <th scope="row">{{ employee.id }}</th>
                  <td>{{ employee.name }}</td>
                  <td>{{ employee.registration_code }}</td>
                  <td>{{ employee.position.area }}</td>
                  <td>{{ employee.position }}</td>
                  <td>
                      <a href="{% url "employee-delete" employee.id %}"><i class="fa fa-trash"></i></a>
                      <a href="{% url "employee-view" employee.id %}"><i class="fa fa-eye"></i></a>
                      <a href="{% url "employee-edit" employee.id %}"><i class="fa fa-pencil"></i></a>
                      <a href="{% url "entries" %}?id={{  employee.id }}"><i class="fa fa-clock-o"></i></a>
                  </td>
                </tr>
              {% endfor %}
          </tbody>
        </table>
    </div>

    <ul class="pagination pagination-success justify-content-center mt-2">
        {% for pg in employees.paginator.page_range %}
            {% if employees.number == pg %}
              <li class="page-item active"><a class="page-link" href="?page={{pg}}{% for key,value in request.GET.items %}{% ifnotequal key 'page' %}&{{ key }}={{ value }}{% endifnotequal %}{% endfor %}" class="btn active">{{pg}}</a></li>
            {% else %}
              <li class="page-item"><a class="page-link" href="?page={{pg}}{% for key,value in request.GET.items %}{% ifnotequal key 'page' %}&{{ key }}={{ value }}{% endifnotequal %}{% endfor %}" class="btn">{{pg}}</a></li>
            {% endif %}
        {% endfor %}
    </ul>
    {% if message %}
        <div class="alert alert-{{type}} text-center" role="alert">{{ message }}</div>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
    <script src="{% static 'js/scripts.js' %}"></script>
{% endblock %}